plugins {
	id 'java'
	id 'maven'
	id 'co.riiid.gradle' version '0.4.2'
}
group = 'com.crossbrowsertesting'
version = '0.25-SNAPSHOT'

description = """common"""

sourceCompatibility = 1.7
targetCompatibility = 1.7

String GITHUB_TOKEN = System.getenv()["GITHUB_TOKEN"]
repositories {
     maven { url "http://repo.jenkins-ci.org/releases/" }
     maven { url "http://repo.maven.apache.org/maven2" }
}
dependencies {
    compile group: 'org.json', name: 'json', version:'20160810'
    compile group: 'commons-codec', name: 'commons-codec', version:'1.9'
    testCompile group: 'junit', name: 'junit', version:'4.12'
    testCompile group: 'org.seleniumhq.selenium', name: 'selenium-java', version:'3.0.1'
}

task hello {
	doLast {
		println GITHUB_TOKEN
	}
}

// tasks
tasks.withType(JavaCompile) {
	options.encoding = 'UTF-8'
}

task wrapper(type: Wrapper) {
	gradleVersion = '4.0.2'
}

github {
	owner = "crossbrowsertesting"
	repo = "ci-common"
	token = GITHUB_TOKEN
	targetCommitish = "master"
	tagName = project.version
	name = project.version
	draft = true
	assets = [
		'build/libs/'+project.name+'-'+project.version+'.jar'
	]
}
